# 移动端H5页面调试

## 一、Android端

### 1. 通过手机端的Chrome浏览器

#### 前置要求

- Android 4.4以上

- 手机开启”开发者选项“，并打开“USB调试”

  <img src="https://oss.kuyinyun.com/11W2MYCO/rescloud1/f6c572afec4f4c2b8ae945de2c12d2f4.png" alt="image-20240326141046232" style="zoom:50%;" />

- 安装“adb”（Android Debug Bridge，可选）

#### 操作步骤

1. 通过手机端chrome访问待调试的页面，手机通过USB连接电脑

2. PC端chrome中访问`chrome://inspect`，如果设备是首次连接调试会弹出如下提示，点击“确认”即可

   <img src="https://oss.kuyinyun.com/11W2MYCO/rescloud1/b5b8bc8ecb974363bebbbec341fd74d5.png" alt="image-20240326141827507" style="zoom:50%;" />

3. PC端Chrome中可以查看到当前可调试的页面，点击需要调试页面下方的“inspect”即可打开单独的调试界面

   ![image-20240326142011232](https://oss.kuyinyun.com/11W2MYCO/rescloud1/c8881141ca1d4a648cc8187bff9e7efc.png)

   ![image-20240326142355707](https://oss.kuyinyun.com/11W2MYCO/rescloud1/7658e78493ac474cacfbc80094a41bfb.png)

   **这里需要注意一下，首次调试时可能需要科学上网才能打开这个调试界面**

### 2. 调试WebView中的页面

安卓4.4之后WebView默认使用的就是Chrome的内核，但要调试通过WebView加载的页面，还需要WebView开启debug开关

```java
 WebView.setWebContentsDebuggingEnabled(true);
```

开启之后，调试的方式是一致的

![image-20240326143558983](https://oss.kuyinyun.com/11W2MYCO/rescloud1/ef6a3e0d29404b6692f8f2c2d96a4ec2.png)

这里我自己写了一个WebView的Demo，并且开启了debug开关，打开应用后，可以手动填入页面地址或扫二维码的方式打开页面

![image-20240326143850710](https://oss.kuyinyun.com/11W2MYCO/rescloud1/f087219d630a46bda28454243c07b8bf.png)

该apk包的[安装地址](https://kuyin.iflysec.com/ycyu/webview/app-debug.apk)

## 二、iOS端

### 1. 通过Safari

#### 前置条件

1. 需要一台mac……
2. 一根适配的usb连接线（有的线虽然可以充电，但无法连接并调试页面）

#### 操作步骤

1. 设置iphone上的safari：设置 --> Safari浏览器 --> 高级 --> 启用“网页检查器”

2. 手机通过safari访问待调试的页面，并通过usb与mac相连

3. mac上打开safari，并在设置 --> 高级 --> 勾选“显示网页开发者功能”，之后就可以在菜单中看到手机端的待调试页面，点击之后就可以开启一个单独的调试界面

   ![image-20240326151627863](https://oss.kuyinyun.com/11W2MYCO/rescloud1/f70b8e511b474b2d861494c815f68bd1.png)

   ![image-20240326151710676](https://oss.kuyinyun.com/11W2MYCO/rescloud1/bafd9b77bee349cfa15b16bd4c224640.png)



## 三、通用

### 1. JavaScript Lib——在页面端直接创建调试面板

这种以[vConsole](https://github.com/Tencent/vConsole)和[Eruda](https://github.com/liriliri/eruda)为代表，使用起来比较简单，基本只需要在页面端引用js文件，然后进行初始化，具体的使用可以参见各自的官网，功能相对有限

![img](https://oss.kuyinyun.com/11W2MYCO/rescloud1/8509fd5bf801440f9d87ad9af7531966.jpeg)

下图中，左侧为vConsole的调试界面，右侧为Eruda的调试界面

<center>
<img src="https://oss.kuyinyun.com/11W2MYCO/rescloud1/652105f9cb11481ab359a0f77a95c64d.png" alt="image-20240326152926452" style="zoom:25%;" />
<img src="https://oss.kuyinyun.com/11W2MYCO/rescloud1/ce9b39b5c1e44dc99516c5a2e0deb126.png" alt="image-20240326152758146" style="zoom:25%;" />
</center>





### 2. weiner类似产品

此类调试方式最早接触的产品就是[weinre](https://people.apache.org/~pmuellr/weinre/docs/latest/)，但项目已经不再维护了，有兴趣的可以去试试，这里只介绍几个类似的替代产品

#### 2.1 [chii](https://github.com/liriliri/chii?tab=readme-ov-file)

![img](https://oss.kuyinyun.com/11W2MYCO/rescloud1/cfea09104eab46c78bcd09556f58207c.jpeg)

它的前端调试界面使用的是最新的chrome devtools frontend，远程调试的效果如下，左侧就是调试的界面，右侧是另一个工具，展示的是我手机上的镜像，用于演示当查看DOM元素时，手机端也会对应的高亮（利用了chrome devtools frontend提供的能力）

![image-20240326160818933](https://oss.kuyinyun.com/11W2MYCO/rescloud1/f1a5d70b75e24181ba797e35990025b4.png)

#### 2.2 [whistle](https://github.com/avwo/whistle) + whistle.chii插件

还有对应的[客户端版本](https://github.com/avwo/whistle-client)

参考文章：

https://juejin.cn/post/7277395050509353017

https://juejin.cn/post/6844903592424374285

