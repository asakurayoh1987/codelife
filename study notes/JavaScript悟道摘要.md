# JavaScript悟道摘要

## 第2章 数值

> Number.EPSILON的值为2.220446049250313080847263336181640625e-16，它是JavaScript中最小的正数，将Number.EPSILON加1时，会得到一个刚好大于1的值。也就是说，任何比Number.EPSILON小的正数加1的结果还是1。

> Number.MAX_SAFE_INTEGER的值为9007199254740991，约为9000万亿，表示最大安全整数。在最大安全整数和最小安全整数之间的整数统称为安全整数。相当于有54位有符号整数类型。一个比最大安全整数还要大的整数加1等同于该数加0。

> Number.MAX_VALUE是JavaScript数值类型中的最大值。它的值为Number.MAX_SAFE_INTEGER * 2 ** 971

> Number.MIN_VALUE是JavaScript中刚好比0大的最小值。它的值为2 ** -1074

> JavaScript在做位运算的时候，会事先将其转换为32位有符号整型（int）并开始计算，在得到结果后再将其转换回JavaScript的数值类型。

## 第12章 函数

> 每当函数被调用的时候，都会创建一个活跃对象（activation object）。该对象对开发者是不可见的，是一个隐藏的数据结构，其中包含了函数在执行的时候必需的信息和绑定，以及返回值的地址，等等。
>
> 在C语言中，这个对象会在栈中被分配生成。当函数返回的时候，该对象会被销毁（或者出栈）。JavaScript则不同，它从一个堆中分配该对象，跟日常用的对象没什么两样。此外，活跃对象并不会在函数返回时被自动销毁，它的生命周期与普通对象的垃圾回收机制一样，是根据引用数量决定的。
>
> 活跃对象包含：
>
> ● 对应函数对象的引用；
>
> ● 调用者对应的活跃对象，用于return之后的控制权转移；
>
> ● 调用完毕之后用于继续执行后续逻辑的恢复信息，通常是一个将在函数调用完毕之后立即执行的指令的地址；
>
> ● 函数对应的形参，从实参初始化而来；
>
> ● 函数中的变量，以undefined进行初始化；
>
> ● 函数用于计算复杂表达式的临时变量；
>
> ● this（如果函数作为一个方法被调用，那么this通常就是它的宿主对象）。

> 函数对象还有如下两个隐藏的属性。
>
> ● 当前函数可执行代码的引用。
>
> ● 当函数对象被创建的时候，这个函数对应的活跃对象就被激活了，从而为闭包提供了可能性。函数可以通过这个隐藏属性去访问函数中创建它的变量。

> 函数是可嵌套的。当嵌套的函数对象被创建时，它会包含一个外层函数对象所对应的活跃对象引用。拥有“外层函数对象所对应的活跃对象引用”的函数对象就被称为闭包（closure）。
