# gdb的使用

要充分的利用 gdb 帮助我们找到程序编写时候的问题，我们需要在编译时使用`-g`作为一个编译参数（否则你将看不见函数名、变量名，而只能看到运行时的内存地址），例如：

```bash
gcc -o program -g main.c
```

这时候，我们再通过

```bash
gdb ./program
```

将程序在 gdb 提供的一个“受控制的环境”中运行起来。这时候你会看到一系列关于 gdb 的说明和下面这样一个等待你通过命令进行调试的命令行。

```bash
(gdb)
```

这里提供一些最基本的 gdb 使用：

- 如果你输入`l`（list 的首字母），gdb 会列出带着行号的10行程序，你可以根据这个行号进行进一步的调试。`l`之后可以加行号作为参数，列出这一行开始的10行（例如希望列出第 1 到 10 行时，我们可以写`l 1`）。
- 如果你输入`b`（breakpoint 的首字母），则表示设置程序运行的断点，程序运行到断点时就会暂停运行。`b`之后既可以加函数名作为参数（例如当有一个函数名为 func 时，我们可以写`b func`），使程序在调用某一函数时暂停；也可以加行号作为参数（例如`b 5`表示在第五行设置一个断点），使程序在运行某一行时暂停。
- 如果你输入`r`（run 的首字母），程序则会开始运行，并且暂停在我们设置了断点的位置。
	- 运行暂停时，我们如果输入`p 表达式`（print 的首字母） 则表示我们希望在当前断点运行这个表达式并查看它的值。例如`p ++age[0]`	表示我们希望让`age[0]`自增 1 并查看自增后的值。注意：这个表达式会对之后的程序继续运行造成影响。
	- 运行暂停时，如果我们输入`n`（next 的首字母）程序会执行暂停位置后的下一条语句并再次暂停。
	- 运行暂停时，如果我们输入`c`（continue 的首字母）程序会继续执行到下一关断点再暂停（如果没有断点就会执行直到结束）。
