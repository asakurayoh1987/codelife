# 编译V8

## 官方文档

[官方文档](https://v8.dev/docs/build)

## 依赖条件

* 科学上网，否则访问不了google的代码仓库
* git版本尽量用最新的

## 安装depot_tools

* mkdir v8_opt && cd v8_opt
* git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git
* 添加环境变量：export PATH=/path/to/depot_tools:$PATH
* source ~/.zshrc
* gclient

具体可参见[官方说明](https://commondatastorage.googleapis.com/chrome-infra-docs/flat/depot_tools/docs/html/depot_tools_tutorial.html#_setting_up)

## 克隆v8代码

* mkdir v8 && cd v8
* fetch v8（官方文档是这样说明，但直接使用时在我的mac上一直报错，需要改为使用`fetch --no-history v8`）
* cd v8 && git pull && gclient sync
* tools/dev/gm.py x64.debug（如果选release版本，则没有--print-ast这样的flag）或tools/dev/gm.py x64.release
* 为了后续使用d8方便，可以添加别名：`alias d8=/Users/ycyu/SourceStudy/v8/v8/out/x64.debug/d8`

**如果提示：env: python2: No such file or directory，则使用命令：ln -sf /usr/bin/python2.7 /usr/bin/python2**


