

# 视频生成缩略图

## 视频生成帧图（ffmpeg）

```bash
ffmpeg -i test.mp4 -vf scale=375:-1 -vframes 16 frames/%04d.png -hide_banner
```
主要参数说明：
* -i：输入文件
* -vf：指定过滤器，此处为进行缩放，宽度为375，高度自适应，保持源宽高比
* -vframes：获取前16帧

文件名的命名格式为4位数字.png

## 帧图拼接成sprite图（ImageMagick）

```bash
montage -border 0 -geometry 375x -tile 6x -quality 60% frames/*.png myvideo.jpg
```
主要参数说明：
* -border：边框
* -geometry：拼接的每张图片的大小，宽度375，高度自适应，保持源宽高比
* -title：拼接的平铺效果，列数x行数，这里指这下为6列，行数自增，如果指定为x1，则表示只有一行，列数自增
* -quality：指定格式转换时的压缩质量

## 设置为元素的背景动画

* 使用库[canvid](https://github.com/gka/canvid)
* 使用工具TexturePacker，除了生成拼接后的图片外，还生成对应的css
* 压缩时指定-tile为x1，然后使用css3 帧动画来处理，如上述16帧图拼接时，可以使用如下代码：

```html
<body>
  <div class="preview"></div>
</body>
```
```css
<style>
	.preview {
		width: 375px;
		height: 281px;
		background-image: url('./myvideo.jpg');
		animation: frames 1s infinite steps(15) alternate-reverse;
		margin: auto;
	}

	@keyframes frames {
		100% {
			background-position: -5625px 0;
		}
	}
</style>
```